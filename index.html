<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>FiyatTakip - AkÄ±llÄ± Fiyat KarÅŸÄ±laÅŸtÄ±rma</title>
  <meta name="description" content="Trendyol, Hepsiburada, n11, Amazon ve daha fazlasÄ±nda fiyat karÅŸÄ±laÅŸtÄ±rma">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <meta name="theme-color" content="#0b1020">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>

<body>
  <!-- LOGIN MODAL -->
  <div id="loginModal" class="modalWrap" aria-hidden="true">
    <div class="modalBack" id="loginBackdrop"></div>
    <div class="modalCard" role="dialog" aria-modal="true" aria-label="GiriÅŸ">
      <div class="modalTop">
        <div class="modalTitle">GiriÅŸ Yap</div>
        <button id="closeLogin" class="iconBtn" type="button" aria-label="Kapat">âœ•</button>
      </div>

      <div class="authTabs">
        <button id="tabLogin" class="btnGhost sm isActive" type="button">GiriÅŸ</button>
        <button id="tabRegister" class="btnGhost sm" type="button">KayÄ±t</button>
      </div>

      <div class="authTools">
        <button id="btnClearCache" class="btnGhost sm" type="button">ğŸ§¹ Temizle</button>
      </div>

      <div id="loginPane" class="authPane">
        <label class="lbl">E-posta</label>
        <input id="loginEmail" type="email" autocomplete="email" placeholder="ornek@mail.com" />
        <label class="lbl">Åifre</label>
        <input id="loginPass" type="password" autocomplete="current-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
        <div class="row">
          <button id="btnLogin" class="btnPrimary" type="button">GiriÅŸ Yap</button>
          <button id="btnGoogleLogin" class="btnGhost" type="button">Google ile</button>
        </div>
      </div>

      <div id="registerPane" class="authPane hidden">
        <label class="lbl">E-posta</label>
        <input id="regEmail" type="email" autocomplete="email" placeholder="ornek@mail.com" />
        <label class="lbl">Åifre</label>
        <input id="regPass" type="password" autocomplete="new-password" placeholder="en az 6 karakter" />
        <label class="lbl">Åifre (Tekrar)</label>
        <input id="regPass2" type="password" autocomplete="new-password" placeholder="ÅŸifreyi tekrar yaz" />
        <div class="row">
          <button id="btnRegister" class="btnPrimary" type="button">KayÄ±t Ol</button>
          <button id="btnGoogleLogin2" class="btnGhost" type="button">Google ile</button>
        </div>
        <div class="mini muted">KayÄ±t olunca otomatik giriÅŸ yapÄ±lÄ±r.</div>
      </div>
    </div>
  </div>

  <!-- APP -->
  <div id="app" class="appShell">
    <!-- TOP HEADER -->
    <header class="topbar">
      <div class="brand">
        <div class="logoDot"></div>
        <div class="brandText">FiyatTakip</div>
      </div>
      <button id="btnBell" class="iconBtn" type="button" aria-label="Bildirim">ğŸ””</button>
    </header>

    <!-- PAGES -->
    <main class="pages">
      <!-- HOME -->
      <section id="page-home" class="page active">
        <div class="searchCard">
          <div class="searchRow">
            <span class="sIcon">ğŸ”</span>
            <input id="qNormal" placeholder="ÃœrÃ¼n ve maÄŸaza araâ€¦" />
            <button id="btnMic" class="iconBtn" type="button" aria-label="Ses">ğŸ™ï¸</button>
          </div>

          <!-- Arama Modu Toggle -->
          <div class="modeToggle" id="modeToggle">
            <button class="modeBtn active" id="modeNormal" type="button">ğŸ”— Link</button>
            <button class="modeBtn" id="modeFiyat" type="button">ğŸ’° Fiyat</button>
            <button class="modeBtn" id="modeAI" type="button">ğŸ¤– AI</button>
          </div>
          <div class="modeHint" id="modeHint">Link modu: Sadece arama linkleri oluÅŸturur</div>

          <button id="btnNormal" class="btnPrimary full" type="button">Ara</button>
        </div>

        <!-- Banner -->
        <div class="banner">
          <div class="bannerLeft">ğŸŒ¸</div>
          <div class="bannerMid">
            <div class="bannerTitle">Fiyat KarÅŸÄ±laÅŸtÄ±rma!</div>
            <div class="bannerSub">Trendyol, Hepsiburada, n11, Amazon</div>
          </div>
          <div class="bannerRight">ğŸ›ï¸</div>
        </div>

        <!-- HÄ±zlÄ± Aramalar -->
        <div class="quickSearches">
          <h3>HÄ±zlÄ± Aramalar</h3>
          <div class="quickTags">
            <span class="quickTag" data-query="iphone 15">ğŸ“± iPhone</span>
            <span class="quickTag" data-query="airpods">ğŸ§ AirPods</span>
            <span class="quickTag" data-query="nike ayakkabÄ±">ğŸ‘Ÿ Nike</span>
            <span class="quickTag" data-query="televizyon">ğŸ“º TV</span>
            <span class="quickTag" data-query="laptop">ğŸ’» Laptop</span>
          </div>
        </div>

        <!-- Son Aramalar -->
        <div class="recentSearchesCard">
          <h3>Son Aramalar</h3>
          <div class="recentList" id="recentList"></div>
        </div>
      </section>

      <!-- SEARCH RESULTS -->
      <section id="page-search" class="page">
        <div class="pageHead">
          <div class="pageTitle">SonuÃ§lar</div>
          <button id="btnClearSearch" class="btnGhost" type="button">Temizle</button>
        </div>
        <div id="normalList" class="list">
          <!-- Fiyat sonuÃ§larÄ± buraya eklenecek -->
        </div>
      </section>

      <!-- GRAPH -->
      <section id="page-graph" class="page">
        <div class="pageHead">
          <div class="pageTitle">Grafik</div>
          <button id="btnGraphRefresh" class="btnGhost" type="button">Yenile</button>
        </div>
        <div class="miniHint">Favorilerinin fiyat geÃ§miÅŸi burada gÃ¶rÃ¼necek.</div>
        <div id="graphRoot" class="cardBox">Grafik alanÄ±</div>
      </section>

      <!-- FAVORITES -->
      <section id="page-favs" class="page">
        <div class="pageHead">
          <div class="pageTitle">Favoriler</div>
          <button id="btnFavRefresh" class="btnGhost" type="button">Yenile</button>
        </div>
        <div id="favList" class="list"></div>
      </section>

      <!-- SETTINGS -->
      <section id="page-settings" class="page">
        <div class="pageHead">
          <div class="pageTitle">Ayarlar</div>
        </div>

        <div class="cardBox">
          <div class="rowBetween">
            <div>
              <div class="cardTitle">API AyarlarÄ±</div>
              <div class="miniHint">Fiyat API URL'si</div>
            </div>
            <button id="btnApiSettings" class="btnPrimary" type="button">DÃ¼zenle</button>
          </div>
        </div>

        <div class="cardBox">
          <div class="rowBetween">
            <div>
              <div class="cardTitle">AI AyarlarÄ±</div>
              <div class="miniHint">API Key / Model seÃ§imi</div>
            </div>
            <button id="btnAiSettings" class="btnPrimary" type="button">AÃ§</button>
          </div>
        </div>

        <div class="cardBox">
          <div class="rowBetween">
            <div>
              <div class="cardTitle">Hesap</div>
              <div class="miniHint">Ã‡Ä±kÄ±ÅŸ yap</div>
            </div>
            <button id="logoutBtn" class="btnGhost" type="button">Ã‡Ä±kÄ±ÅŸ</button>
          </div>
        </div>

        <div class="miniHint">Cache sorunlarÄ±nda: Site verilerini temizle / PWA'yÄ± kaldÄ±r-ekle.</div>
      </section>
    </main>

    <!-- TABBAR -->
    <nav class="tabbar" aria-label="Alt MenÃ¼">
      <button class="tab active" type="button" data-page="home">
        <span class="ico">ğŸ </span><span class="lbl">Ana</span>
      </button>

      <button class="tab" type="button" data-page="graph">
        <span class="ico">ğŸ“Š</span><span class="lbl">Grafik</span>
      </button>

      <!-- Kamera butonu JS ile eklenecek -->
      <div class="tabSpacer" aria-hidden="true"></div>

      <button class="tab" type="button" data-page="favs">
        <span class="ico">â¤ï¸</span><span class="lbl">Fav</span>
      </button>

      <button class="tab" type="button" data-page="settings">
        <span class="ico">âš™ï¸</span><span class="lbl">Ayar</span>
      </button>
    </nav>
  </div>

  <!-- TOAST MESAJ -->
  <div id="toast" class="toast hidden"></div>

  <!-- API AYARLARI MODAL -->
  <div id="apiModal" class="modalWrap" aria-hidden="true">
    <div class="modalBack" id="apiBackdrop"></div>
    <div class="modalCard" role="dialog" aria-modal="true" aria-label="API AyarlarÄ±">
      <div class="modalTop">
        <div class="modalTitle">API AyarlarÄ±</div>
        <button id="closeApi" class="iconBtn" type="button" aria-label="Kapat">âœ•</button>
      </div>

      <div class="modalBody">
        <div class="row">
          <label class="lbl">API URL</label>
          <input id="apiUrl" class="input inputDark" type="text" placeholder="https://fiyattakip-api.onrender.com/api" />
        </div>

        <div class="row">
          <label class="lbl">API Durumu</label>
          <div id="apiStatus" class="apiStatus offline">BaÄŸlantÄ± yok</div>
        </div>

        <div class="row">
          <button id="btnTestApi" class="btnGhost" type="button">Test Et</button>
          <button id="btnSaveApi" class="btnPrimary" type="button">Kaydet</button>
        </div>

        <div class="mini muted">Render.com'dan aldÄ±ÄŸÄ±n API URL'sini buraya yapÄ±ÅŸtÄ±r.</div>
      </div>
    </div>
  </div>

  <!-- AI AYARLARI MODAL -->
  <div id="aiModal" class="modalWrap" aria-hidden="true">
    <div class="modalBack" id="aiBackdrop"></div>
    <div class="modalCard" role="dialog" aria-modal="true" aria-label="AI AyarlarÄ±">
      <div class="modalTop">
        <div class="modalTitle">AI AyarlarÄ±</div>
        <button id="closeAi" class="iconBtn" type="button" aria-label="Kapat">âœ•</button>
      </div>

      <div class="modalBody">
        <div class="row">
          <label class="lbl">AI Durumu</label>
          <select id="aiEnabled" class="input inputDark">
            <option value="on">AÃ§Ä±k</option>
            <option value="off">KapalÄ±</option>
          </select>
        </div>

        <div class="row">
          <label class="lbl">SaÄŸlayÄ±cÄ±</label>
          <select id="aiProvider" class="input inputDark">
            <option value="gemini">Gemini</option>
            <option value="openai">OpenAI</option>
          </select>
        </div>

        <div class="row">
          <label class="lbl">API Key</label>
          <input id="aiApiKey" class="input inputDark" type="password" placeholder="anahtarÄ±nÄ±zÄ± girin" />
        </div>

        <div class="row">
          <button id="btnSaveAI" class="btnPrimary" type="button">Kaydet</button>
        </div>

        <div class="mini muted">Test butonu bir sonraki adÄ±mda eklenecek.</div>
      </div>
    </div>
  </div>

  <!-- SCRIPTS -->
  

  <!-- Navigation (classic script, adds tabbar behavior) -->
  <script src="./app.nav.js"></script>

  <!-- Main app (ES module: imports firebase.js + ai.js etc.) -->
  <script type="module" src="./app.js"></script>
  <script type="module" src="firebase-config.js"></script>
<script type="module" src="firebase.js"></script>
<script type="module" src="ai.js"></script>
<script type="module" src="app.nav.js"></script>
<script type="module" src="app.js"></script>
  <script>
  window.onerror = function(msg, src, line, col, err) {
    alert("JS HATA: " + msg + " (SatÄ±r: " + line + ")");
  };
</script>
</body>
</html>

