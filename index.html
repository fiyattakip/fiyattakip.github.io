<!doctype html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>fiyattakip</title>

  <link rel="manifest" href="./manifest.json" />
  <meta name="theme-color" content="#EAF0FF" />
  <link rel="icon" href="./icon-192.png" />

  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <!-- AUTH overlay (arka planÄ± tamamen kapatÄ±r) -->
  <div id="authRoot" class="authRoot"></div>

  <!-- APP -->
  <div class="app-shell" id="appShell">

    <!-- TOPBAR -->
    <header class="topbar">
      <div class="brandpill">
        <img class="brandlogo" src="./icon-192.png" alt="logo">
        <span class="brandtext">fiyattakip</span>
      </div>

      <div class="topactions">
        <button class="iconbtn" id="notifyBtn" title="Bildirim">
          ğŸ””
        </button>
        <button class="iconbtn" id="aiBtn" title="AI Arama (demo)">
          ğŸ¤–
        </button>
        <button class="logoutbtn" id="logoutBtn">Ã‡Ä±kÄ±ÅŸ</button>
      </div>
    </header>

    <main class="container">

      <!-- HERO / SEARCH -->
      <section class="card hero">
        <div class="heroHead">
          <div class="heroTitle">Fiyat<br/>KarÅŸÄ±laÅŸtÄ±r</div>
          <div class="heroChip">Site iÃ§i â€œucuzdanâ€</div>
        </div>

        <p class="heroDesc">
          ÃœrÃ¼n adÄ±nÄ± yaz, seÃ§tiÄŸin sitelerde arama aÃ§ar.
          (Uygulama iÃ§inden direkt fiyat Ã§ekmek CORS/captcha yÃ¼zÃ¼nden yok.)
        </p>

        <!-- site chips -->
        <div class="siteGrid" id="siteGrid"></div>

        <!-- search + autocomplete -->
        <div class="searchRow">
          <input id="query" class="searchInput" placeholder="ÃœrÃ¼n adÄ±nÄ± yazÄ±n..."
                 autocomplete="off" />
          <button id="searchBtn" class="searchBtn">Ara</button>
        </div>

        <div id="suggestBox" class="suggestBox" style="display:none;"></div>

        <div class="subline">
          <b>Arama satÄ±rlarÄ±</b> â€” Her satÄ±r: seÃ§ili sitede arama aÃ§ar + â€œFavoriâ€ hatÄ±rlanÄ±r.
        </div>

        <div class="rowActions">
          <button id="clearBtn" class="ghostBtn">Temizle</button>
          <button id="openAllBtn" class="ghostBtn">SeÃ§ili Siteleri AÃ§</button>
        </div>

        <div id="results" class="resultsBox">
          <div class="empty">HenÃ¼z arama yapÄ±lmadÄ±.</div>
        </div>
      </section>

      <!-- FAVORITES -->
      <section class="card favSection">
        <div class="favHeader">
          <div>
            <div class="favTitle">â¤ Favoriler</div>
            <div class="favDesc">
              Linkler gizli. Site butonlarÄ± + Copy Link var.
              Uygulama aÃ§Ä±lÄ±nca %5+ dÃ¼ÅŸÃ¼ÅŸ kontrolÃ¼ (demo).
            </div>
          </div>

          <div class="favHeaderRight">
            <select id="sortSelect" class="select">
              <option value="lastAsc">SÄ±rala: Son fiyat (Ucuzâ†’PahalÄ±)</option>
              <option value="lastDesc">SÄ±rala: Son fiyat (PahalÄ±â†’Ucuz)</option>
              <option value="newest">SÄ±rala: En yeni</option>
            </select>
            <button id="favRefresh" class="ghostBtn">Yenile</button>
          </div>
        </div>

        <div id="favorites" class="favBox">
          <div class="empty">Favori yok.</div>
        </div>
      </section>

    </main>
  </div>

  <!-- CHART MODAL -->
  <div id="chartModal" class="modalBack" style="display:none;">
    <div class="modalCard">
      <div class="modalTop">
        <div>
          <div id="modalTitle" class="modalTitle">Grafik</div>
          <div id="modalSub" class="modalSub">â€”</div>
        </div>
        <button id="modalClose" class="modalClose">âœ•</button>
      </div>

      <canvas id="bigChart" width="900" height="420"></canvas>
      <div id="chartHint" class="chartHint"></div>
    </div>
  </div>

  <!-- TOAST -->
  <div id="toast" class="toast"></div>

  <script type="module" src="./app.js"></script>

  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js").catch(()=>{});
    }
  </script>
</body>
</html>
