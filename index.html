<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#e9eefb" />
  <title>fiyattakip</title>

  <link rel="manifest" href="./manifest.json" />
  <link rel="stylesheet" href="./styles.css?v=20251217-1" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="appicon" aria-hidden="true">ğŸ“Š</div>
      <div class="brandtxt">
        <div class="brandname">fiyattakip</div>
        <div class="brandsub">Fiyat takip & favoriler</div>
      </div>
    </div>

    <div class="topactions">
      <button id="btnNotify" class="chip" type="button" title="Bildirim">ğŸ””</button>
      <button id="btnAISettings" class="chip" type="button" title="AI AyarlarÄ±">âœ¨</button>
      <button id="btnLogout" class="chip danger" type="button">Ã‡Ä±kÄ±ÅŸ</button>
    </div>
  </header>

  <!-- Auth overlay -->
  <div id="authOverlay" class="overlay">
    <div class="modal">
      <div class="modalhead">
        <div class="brand small">
          <div class="appicon">ğŸ“Š</div>
          <div class="brandtxt">
            <div class="brandname">fiyattakip</div>
            <div class="brandsub">GiriÅŸ yap / kayÄ±t ol</div>
          </div>
        </div>
      </div>

      <div class="tabs">
        <button id="tabLogin" class="tab active" type="button">GiriÅŸ</button>
        <button id="tabRegister" class="tab" type="button">KayÄ±t</button>
      </div>

      <label class="lbl">Email</label>
      <input id="authEmail" class="input" type="email" autocomplete="email" placeholder="ornek@mail.com" />

      <label class="lbl">Åifre</label>
      <div class="pwrow">
        <input id="authPass" class="input" type="password" autocomplete="current-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
        <button id="togglePw" class="pweye" type="button">ğŸ‘ï¸</button>
      </div>

      <div id="registerRepeat" class="hidden">
        <label class="lbl">Åifre (tekrar)</label>
        <div class="pwrow">
          <input id="authPass2" class="input" type="password" autocomplete="new-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
          <button id="togglePw2" class="pweye" type="button">ğŸ‘ï¸</button>
        </div>
      </div>

      <button id="btnAuthPrimary" class="btn primary big" type="button">GiriÅŸ Yap</button>

      <button id="btnGoogle" class="btn ghost big" type="button">G Google ile devam et</button>

      <div id="authMsg" class="msg"></div>
    </div>
  </div>

  <main class="container">
    <section class="card">
      <div class="cardhead">
        <h1>Fiyat KarÅŸÄ±laÅŸtÄ±r</h1>
        <div class="pill">Site iÃ§i â€œucuzdanâ€</div>
      </div>

      <p class="muted">
        ÃœrÃ¼n adÄ±nÄ± yaz, seÃ§tiÄŸin sitelerde arama aÃ§ar.
        (Uygulama iÃ§inden direkt fiyat Ã§ekmek CORS/captcha yÃ¼zÃ¼nden yok.)
      </p>

      <div class="sites">
        <label class="sitechip"><input type="checkbox" class="sitecb" value="trendyol" checked> Trendyol</label>
        <label class="sitechip"><input type="checkbox" class="sitecb" value="hepsiburada" checked> Hepsiburada</label>
        <label class="sitechip"><input type="checkbox" class="sitecb" value="n11" checked> N11</label>
        <label class="sitechip"><input type="checkbox" class="sitecb" value="amazontr" checked> Amazon TR</label>
        <label class="sitechip"><input type="checkbox" class="sitecb" value="pazarama" checked> Pazarama</label>
        <label class="sitechip"><input type="checkbox" class="sitecb" value="cicek" checked> Ã‡iÃ§ekSepeti</label>
        <label class="sitechip"><input type="checkbox" class="sitecb" value="idefix" checked> idefix</label>
      </div>

      <!-- Search row: Ara + AI side by side -->
      <div class="search-row">
        <input id="q" class="input" type="text" placeholder="ÃœrÃ¼n adÄ±nÄ± yazÄ±n..." autocomplete="off" />
        <div class="search-actions">
          <button id="btnSearch" class="btn primary" type="button">Ara</button>
          <button id="btnAI" class="btn ai" type="button" title="AI Arama">AI</button>
        </div>
      </div>

      <!-- AI panel under normal search -->
      <div id="aiPanel" class="ai-panel hidden">
        <div class="ai-panel-head">
          <div class="ai-title">AI ile aramayÄ± dÃ¼zelt (Gemini)</div>
          <button id="btnAIClose" class="ai-close" type="button">Ã—</button>
        </div>

        <div class="ai-panel-body">
          <input id="geminiKey" class="input" type="password" placeholder="Gemini API Key (buraya yapÄ±ÅŸtÄ±r)" autocomplete="off" />
          <div class="ai-panel-actions">
            <button id="btnAISave" class="btn" type="button">Kaydet</button>
            <button id="btnAIRun" class="btn primary" type="button">AI ile dÃ¼zelt</button>
          </div>
          <div id="aiStatus" class="ai-status"></div>
        </div>
      </div>

      <div class="hint">
        Arama satÄ±rlarÄ± â€” Her satÄ±r: seÃ§ili sitede arama aÃ§ar + â€œFavoriâ€ hatÄ±rlanÄ±r.
      </div>

      <div class="row2">
        <button id="btnClearSearch" class="btn" type="button">Temizle</button>
        <button id="btnOpenSelected" class="btn ghost" type="button">SeÃ§ili Siteleri AÃ§</button>
      </div>

      <div id="searchRows" class="searchrows empty">
        HenÃ¼z arama yapÄ±lmadÄ±.
      </div>
    </section>

    <section class="card">
      <div class="favhead">
        <div>
          <h2>â¤ï¸ Favoriler</h2>
          <div class="muted small">
            Linkler gizli. Site butonlarÄ± + Copy Link var. Uygulama aÃ§Ä±lÄ±nca %5+ dÃ¼ÅŸÃ¼ÅŸte bildirim (demo).
          </div>
        </div>
        <button id="btnRefreshFav" class="btn ghost" type="button">Yenile</button>
      </div>

      <div class="favtoolbar">
        <select id="sortSelect" class="select">
          <option value="last_desc">SÄ±rala: Son fiyat (PahalÄ±â†’Ucuz)</option>
          <option value="last_asc">SÄ±rala: Son fiyat (Ucuzâ†’PahalÄ±)</option>
          <option value="name_asc">SÄ±rala: ÃœrÃ¼n adÄ± (Aâ†’Z)</option>
          <option value="site_asc">SÄ±rala: Site</option>
        </select>

        <button id="btnExport" class="btn" type="button">DÄ±ÅŸa Aktar</button>
        <button id="btnImport" class="btn" type="button">Ä°Ã§e Aktar</button>
        <input id="importFile" type="file" accept="application/json" class="hidden" />
      </div>

      <div id="favList" class="favlist empty">Favori yok.</div>
    </section>
  </main>

  <footer class="footspace"></footer>

  <script type="module" src="./app.js?v=20251217-1"></script>
</body>
</html>
