<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#2a3ea6" />
  <title>fiyattakip</title>

  <link rel="manifest" href="./manifest.json" />
  <link rel="icon" href="./icon-192.png" />
  <link rel="apple-touch-icon" href="./icon-192.png" />
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <div id="authOverlay" class="authOverlay">
    <div class="authCard">
      <div class="authTop">
        <div class="brandRow">
          <img class="brandLogo" src="./icon-192.png" alt="fiyattakip" />
          <div class="brandText">
            <div class="brandName">fiyattakip</div>
            <div class="brandSub">GiriÅŸ yap / kayÄ±t ol</div>
          </div>
        </div>
      </div>

      <div class="authTabs">
        <button id="tabSignIn" class="tab active" type="button">GiriÅŸ</button>
        <button id="tabSignUp" class="tab" type="button">KayÄ±t</button>
      </div>

      <div class="authForm">
        <label class="field">
          <span>E-posta</span>
          <input id="authEmail" type="email" placeholder="ornek@mail.com" autocomplete="email" />
        </label>

        <label class="field">
          <span>Åifre</span>
          <div class="pwWrap">
            <input id="authPassword" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password" />
            <button id="togglePw" class="iconBtn" type="button" aria-label="Åifreyi gÃ¶ster/gizle">ğŸ‘ï¸</button>
          </div>
        </label>

        <label id="confirmWrap" class="field hidden">
          <span>Åifre (tekrar)</span>
          <div class="pwWrap">
            <input id="authPassword2" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="new-password" />
            <button id="togglePw2" class="iconBtn" type="button" aria-label="Åifreyi gÃ¶ster/gizle">ğŸ‘ï¸</button>
          </div>
        </label>

        <button id="btnAuthPrimary" class="btnPrimary full" type="button">GiriÅŸ Yap</button>

        <button id="btnGoogle" class="btnGhost full" type="button">
          <span class="gIcon">G</span> Google ile devam et
        </button>

        <div id="authMsg" class="authMsg"></div>
      </div>
    </div>
  </div>

  <header class="topbar">
    <div class="topbarInner">
      <div class="brandPill">
        <img class="brandLogoSmall" src="./icon-192.png" alt="logo" />
        <span class="brandTitle">fiyattakip</span>
      </div>

      <div class="topbarActions">
        <button id="btnEnableNotif" class="iconBtn topIcon" type="button" title="Bildirim">ğŸ””</button>
        <button id="btnHelper" class="iconBtn topIcon" type="button" title="YardÄ±m">ğŸ¤–</button>
        <button id="btnLogout" class="btnDanger" type="button">Ã‡Ä±kÄ±ÅŸ</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="card hero">
      <div class="heroGrid">
        <div>
          <h1>Fiyat<br/>KarÅŸÄ±laÅŸtÄ±r</h1>
          <p class="muted">
            ÃœrÃ¼n adÄ±nÄ± yaz, seÃ§tiÄŸin sitelerde arama aÃ§ar.
            <b>(Uygulama iÃ§inden direkt fiyat Ã§ekmek CORS/captcha yÃ¼zÃ¼nden yok.)</b>
          </p>
        </div>
        <div class="heroBadge">Site iÃ§i â€œucuzdanâ€</div>
      </div>

      <div class="chips" id="siteChips"></div>

      <div class="searchRow">
        <div class="searchInputWrap">
          <input id="qInput" class="searchInput" type="text" placeholder="ÃœrÃ¼n adÄ±nÄ± yazÄ±n..." autocomplete="off" />
          <div id="suggestBox" class="suggestBox hidden"></div>
        </div>
        <button id="btnSearch" class="btnPrimary" type="button">Ara</button>
      </div>

      <div class="actionsRow">
        <button id="btnClearResults" class="btnGhost" type="button">Temizle</button>
        <button id="btnOpenSelected" class="btnGhost" type="button">SeÃ§ili Siteleri AÃ§</button>
      </div>

      <div class="subTitle">Arama satÄ±rlarÄ± â€” Her satÄ±r: seÃ§ili sitede arama aÃ§ar + â€œFavoriâ€ hatÄ±rlanÄ±r.</div>
      <div id="resultsBox" class="resultsBox">
        <div class="emptyHint">HenÃ¼z arama yapÄ±lmadÄ±.</div>
      </div>
    </section>

    <section class="card">
      <div class="favHeader">
        <div>
          <div class="favTitle">ğŸ–¤ Favoriler</div>
          <div class="muted small">
            Linkler gizli. Site butonlarÄ± + Copy Link var.
            Uygulama aÃ§Ä±lÄ±nca %5+ dÃ¼ÅŸÃ¼ÅŸ kontrolÃ¼ (demo).
          </div>
        </div>

        <div class="favControls">
          <select id="sortFav" class="select">
            <option value="lastPriceDesc" selected>SÄ±rala: Son fiyat (PahalÄ±â†’Ucuz)</option>
            <option value="lastPriceAsc">SÄ±rala: Son fiyat (Ucuzâ†’PahalÄ±)</option>
            <option value="nameAsc">SÄ±rala: ÃœrÃ¼n adÄ± (Aâ†’Z)</option>
            <option value="siteAsc">SÄ±rala: Site (Aâ†’Z)</option>
          </select>
          <button id="btnRefreshFav" class="btnGhost" type="button">Yenile</button>
        </div>
      </div>

      <div id="favBox" class="favBox">
        <div class="emptyHint">Favori yok.</div>
      </div>
    </section>
  </main>

  <div id="chartModal" class="modal hidden">
    <div class="modalBackdrop"></div>
    <div class="modalCard">
      <div class="modalTop">
        <div id="chartTitle" class="modalTitle">Fiyat GrafiÄŸi</div>
        <button id="btnCloseChart" class="iconBtn" type="button">âœ–</button>
      </div>
      <canvas id="chartCanvas" width="800" height="420"></canvas>
      <div id="chartHint" class="muted small"></div>
    </div>
  </div>

  <div id="helpModal" class="modal hidden">
    <div class="modalBackdrop"></div>
    <div class="modalCard">
      <div class="modalTop">
        <div class="modalTitle">YardÄ±m</div>
        <button id="btnCloseHelp" class="iconBtn" type="button">âœ–</button>
      </div>
      <div class="helpText">
        <p><b>NasÄ±l Ã§alÄ±ÅŸÄ±r?</b> ÃœrÃ¼n adÄ±nÄ± yaz â†’ site seÃ§ â†’ â€œAraâ€. AÃ§Ä±lan sayfadan linki alÄ±p favoriye ekle. Sonra â€œFiyat ekleâ€ ile fiyat geÃ§miÅŸini tut.</p>
        <p><b>Otomatik fiyat Ã§ekmiyor mu?</b> HayÄ±r. Ã‡oÄŸu site CORS/captcha yÃ¼zÃ¼nden tarayÄ±cÄ±dan Ã§ekime izin vermiyor.</p>
        <p><b>%5+ dÃ¼ÅŸÃ¼ÅŸ bildirimi?</b> Uygulama aÃ§Ä±lÄ±nca favorilerin son 2 fiyat kaydÄ± karÅŸÄ±laÅŸtÄ±rÄ±lÄ±r. %5+ dÃ¼ÅŸÃ¼ÅŸte bildirim gÃ¶sterilir (izin verirsen).</p>
      </div>
    </div>
  </div>

  <script type="module" src="./app.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./sw.js").catch(() => {});
      });
    }
  </script>
</body>
</html>
